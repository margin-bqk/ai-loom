# 变更日志

所有 LOOM 项目的显著变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [0.10.1] - 2026-02-07

### 新增
- **项目清理工具**：创建自动化清理脚本 `scripts/tools/cleanup_project.py`
- **目录重组**：scripts目录按功能重组为子目录结构
- **清理文档**：生成详细的清理报告和计划文档
- **VSCode标签检查工具**：`scripts/tools/check_vscode_tabs.py`

### 变更
- **根目录清理**：移除所有临时测试文件和调试文件
- **scripts目录重组**：创建 deploy/, test_utils/, verification/, tools/, setup/, debug/ 子目录
- **文件组织优化**：合并重复脚本，保留最新版本
- **项目结构标准化**：确保目录结构符合Python项目最佳实践

### 修复
- **空目录清理**：删除空目录 `-p/`
- **数据库文件验证**：确认数据库文件完整性
- **VSCode标签残留**：识别并报告不存在的文件标签

### 安全
- 清理工具包含安全机制，防止误删重要文件
- 重要配置文件受到保护

## [0.10.0] - 2026-01-12

### 新增
- **阶段1重构完成**：项目定位重构 - 集成和发布准备
- **系统集成**：完整的五层架构集成测试
- **发布包**：v0.10.0版本发布包准备
- **部署配置**：更新Docker和Kubernetes配置支持新功能
- **迁移指南**：创建从v0.9.x到v0.10.0的迁移指南
- **发布检查清单**：完整的发布流程和质量检查清单

### 变更
- **项目定位重构**：从"游戏引擎"改为"叙事解释器"相关术语
- **架构优化**：五层架构（核心、规则、解释、记忆、干预）接口标准化
- **接口兼容性**：验证各层之间的接口兼容性
- **版本管理**：更新版本号到v0.10.0（阶段1发布版本）
- **文档更新**：更新所有项目文档、API文档和用户界面术语
- **配置管理**：更新环境变量配置和部署配置

### 修复
- **测试修复**：修复测试导入错误和接口不匹配问题
- **集成问题**：解决组件集成中的兼容性问题
- **文档错误**：修正文档中的术语不一致问题

### 安全
- 无安全更新

## [0.1.0] - 2025-12-31

### 新增
- LOOM 项目初始版本
- 核心运行时引擎：会话管理、回合调度、持久化引擎
- 规则层：Markdown 规则解析、版本控制、规则加载
- 解释层：LLM 推理流水线、一致性检查、规则解释
- 世界记忆层：结构化存储、向量存储、摘要生成
- 玩家干预层：OOC 处理、世界编辑、Retcon 处理
- CLI 工具：完整的命令行界面
- Web 界面：基于 FastAPI 的现代化 Web UI
- 插件系统：可扩展的插件架构
- 测试套件：单元测试、集成测试、性能测试
- 完整文档：用户指南、架构设计、API 参考

### 变更
- 项目结构优化，采用五层架构设计
- 异步优先设计，支持高并发会话
- 持久化优先，内置 SQLite 存储

### 修复
- 初始版本，无已知问题

## 版本历史

### 0.10.0 (2026-01-12)
- 阶段1重构完成：项目定位重构和发布准备
- 完整的五层架构集成
- 更新部署配置和迁移指南

### 0.1.0 (2025-12-31)
- 初始发布

---

## 发布说明撰写指南

每个版本发布时，应包含以下部分：

1. **版本号**：遵循语义化版本规范
2. **发布日期**：YYYY-MM-DD 格式
3. **变更类别**：
   - `新增`：新功能
   - `变更`：现有功能的变更
   - `弃用`：即将删除的功能
   - `移除`：已删除的功能
   - `修复`：问题修复
   - `安全`：安全相关更新

4. **详细描述**：
   - 每个变更项使用项目符号列表
   - 包含相关 issue 或 PR 编号（如 `#123`）
   - 重要变更提供简要说明

## 维护者说明

- 每次发布前必须更新此文件
- 变更项应按重要性排序
- 重大变更应提供迁移指南
- 安全更新必须单独列出并详细说明

---

*此变更日志文件基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/) 规范。*